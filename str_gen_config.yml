# =============================================================================
# Si-GRAPHITE ANODE — RUN CONFIG
# =============================================================================

run_id: 0
seed: 42

# =============================================================================
# DOMAIN
# =============================================================================
# Physical domain: a cube with edge = coating_thickness_um.
# This is the real electrode volume being sampled.
# voxel_resolution is decoupled — no coupling between physical and voxel space.
#
# Derived (not a parameter):
#   voxel_size_nm = (coating_thickness_um * 1000) / voxel_resolution
#   Example: (50.0 * 1000) / 128 = 390 nm/voxel

coating_thickness_um: 50.0 # physical domain edge.  Range: 20.0 – 150.0 µm
voxel_resolution:
  128 # VARIABLE sampling resolution. Options: 64 | 128 | 256
  #   Memory per structure (uint8): 64→0.25 MB | 128→2 MB | 256→16 MB

# =============================================================================
# ELECTRODE COMPOSITION
# =============================================================================
# All weight fractions are relative to total dry electrode mass.
# Sum must equal exactly 1.0 — validate BEFORE running.
#
#   active_material_wt_frac  →  DERIVED = 1 - conductive_additive_wt_frac - binder_wt_frac
#
#   ┌───────────────────────────────────────────────────────────────┐
#   │  Active Material  (derived = 1 - CA - binder, e.g. 0.93)      │
#   │    ├─ Silicon       = active_material × si_wt_frac_in_am      │
#   │    └─ C-matrix      = active_material × (1 - si_wt_frac_in_am)│
#   ├───────────────────────────────────────────────────────────────┤
#   │  Conductive Additive    (set directly, e.g. 0.02)             │
#   ├───────────────────────────────────────────────────────────────┤
#   │  Binder                 (set directly, e.g. 0.05)             │
#   └───────────────────────────────────────────────────────────────┘
#
# Example at defaults:
#   active_material_wt_frac   = 1 - 0.02 - 0.05      = 0.93  (derived)
#   silicon_wt_frac           = 0.93 × 0.10           = 0.093 (derived)
#   c_matrix_wt_frac          = 0.93 × (1 - 0.10)    = 0.837 (derived)
#   conductive_additive       =                         0.02
#   binder                    =                         0.05
#                                                      ──────
#                                                       1.000 ✓
#
# VALIDATION RULES:
#   [1] conductive_additive_wt_frac + binder_wt_frac < 0.20
#       (leaves ≥ 0.80 for active material — below is non-physical)
#   [2] si_wt_frac_in_am ∈ (0.0, 1.0)  — exclusive bounds
#   [3] target_porosity is a volume fraction, independent of mass fractions above

conductive_additive_wt_frac: 0.02 # Range: 0.01 – 0.10
binder_wt_frac: 0.05 # Range: 0.02 – 0.10

si_wt_frac_in_am:
  0.10 # Si / (Si + C-matrix), within active material only
  # Range: 0.05 – 0.50
  #   Low  (commercial): 0.05 – 0.15
  #   Mid  (next-gen):   0.15 – 0.30
  #   High (research):   0.30 – 0.50

target_porosity:
  0.40 # Volume fraction of pores after calendering
  # Range: 0.20 – 0.50
  #   Low  (high energy density): 0.20 – 0.30
  #   Mid  (balanced):            0.30 – 0.40
  #   High (high power):          0.40 – 0.50

# =============================================================================
# SILICON PARAMS
# =============================================================================

si_particle_d50_nm:
  100.0 # Median particle diameter
  # Range: 30 – 3000 nm
  #   Nano:      30  – 150  nm  (best cycling, expensive)
  #   Submicron: 150 – 500  nm
  #   Micron:    500 – 3000 nm  (cheap, poor cycling)

si_particle_size_cv:
  0.30 # Log-normal size distribution width: σ/μ
  # Range: 0.10 – 0.60
  #   Narrow: 0.10 – 0.25
  #   Wide:   0.30 – 0.60

si_morphology: "spherical" # Options: "spherical" | "irregular" | "porous"

si_internal_porosity:
  0.50 # Internal void fraction of porous Si particles
  # Range: 0.30 – 0.70
  # ⚠ ONLY active when si_morphology == "porous"

si_distribution:
  "embedded" # Placement of Si relative to C-matrix particles
  # Options:
  #   "embedded"        → Si inside C-matrix particle body
  #   "surface_anchored"→ Si on outer C-matrix surface
  #   "core_shell"      → C-matrix shell over Si core

si_void_enabled: true # Hollow buffer zone around Si for volume expansion
si_void_fraction:
  0.30 # Buffer void vol / Si particle vol
  # Range: 0.20 – 0.50
  # ⚠ ONLY active when si_void_enabled == true

si_coating_enabled: true
si_coating_type: "carbon_coating" # Options: carbon_coating | siox_coating
si_coating_thickness_nm:
  10.0 # Coating shell thickness
  # Range by type:
  #   "carbon":        5 – 50  nm
  #   "silicon_oxide": 2 – 20  nm
  # ⚠ ONLY active when si_coating_enabled == true

# =============================================================================
# CARBON MATRIX PARAMS
# =============================================================================

carbon_particle_d50_nm:
  12000.0 # Median particle diameter
  # Range: 5000 – 30000 nm (5 – 30 µm)
  #   Artificial:  10000 – 30000 nm
  #   Natural:      5000 – 25000 nm
  #   MCMB:         5000 – 40000 nm

carbon_particle_size_cv:
  0.25 # Log-normal σ/μ
  # Range: 0.15 – 0.45

carbon_type: "graphite_artificial" # Options: graphite_artificial | graphite_natural | graphite_mcmb

# =============================================================================
# CONDUCTIVE ADDITIVE
# =============================================================================

conductive_additive_type: "cb_superp" # Options: cb_superp | cb_c65 | cb_ketjenblack | cnt_multiwalled | graphene_flakes

conductive_additive_distribution:
  "network" # Options: "aggregate" | "dispersed" | "network"
  #   "aggregate"  → clustered clumps, uneven coverage
  #   "dispersed"  → uniform individual particles
  #   "network"    → percolating chain morphology

# =============================================================================
# BINDER
# =============================================================================

binder_type: "pvdf_kynar" # Options: pvdf_kynar | cmc_sbr

binder_distribution:
  "necks" # Options: "uniform" | "patchy" | "necks"
  #   "uniform" → thin film everywhere
  #   "patchy"  → irregular islands
  #   "necks"   → concentrated at particle contacts

# =============================================================================
# MANUFACTURING
# =============================================================================

calendering:
  compression_ratio:
    0.70 # final_z / initial_z  (lower = more compressed)
    # Range: 0.50 – 0.90
    #   Light:   0.80 – 0.90
    #   Typical: 0.65 – 0.80
    #   Heavy:   0.50 – 0.65

  particle_deformation:
    0.30 # Degree of particle plastic flattening
    # Range: 0.00 – 1.00
    #   Graphite (soft):  0.20 – 0.50
    #   Si (hard):        0.00 – 0.20
    #   0.0 = rigid body | 1.0 = fully plastic

  orientation_enhancement:
    0.20 # Additional c-axis alignment induced by calendering
    # Range: 0.00 – 0.50
    #   0.0 = no change | 0.5 = significant alignment

sei:
  enabled: true
  sei_material: "sei_generic"
  thickness_nm:
    15.0 # Average SEI shell thickness
    # Range: 5 – 100 nm
    #   Fresh electrode:  5  – 20  nm
    #   After cycling:    20 – 100 nm
  uniformity_cv:
    0.30 # Spatial thickness variation, σ/μ
    # Range: 0.00 – 1.00
    #   0.0 = perfectly uniform | 1.0 = highly variable

# =============================================================================
# MICROSTRUCTURE CONSTRAINTS
# =============================================================================

percolation:
  enforce: true # Reject + regenerate if threshold not met
  min_threshold:
    0.95 # Min fraction of AM in percolating network
    # Range: 0.80 – 0.99
    # ⚠ Values > 0.99 can cause infinite regeneration loops

contacts:
  coordination_number:
    6.0 # Target avg contacts per carbon particle
    # Range: 4.0 – 8.0
    #   Loosely packed: 4.0 – 5.0
    #   Typical:        5.0 – 7.0
    #   Dense:          7.0 – 8.0

  contact_area_fraction:
    0.10 # Contact patch area / total particle surface area
    # Range: 0.05 – 0.20

# =============================================================================
# DEFECTS
# =============================================================================

defects:
  particle_cracks:
    enabled: false
    crack_probability:
      0.05 # Per-particle crack probability
      # Range: 0.01 – 0.20
    crack_width_nm:
      50.0 # Average crack opening width
      # Range: 10 – 200 nm

  binder_agglomeration:
    enabled: false
    agglomeration_probability:
      0.10 # Probability of excess-binder cluster per region
      # Range: 0.05 – 0.30

  delamination:
    enabled: false
    delamination_fraction:
      0.05 # Fraction of Cu/electrode interface delaminated
      # Range: 0.01 – 0.20

  pore_clustering:
    enabled: false
    clustering_degree:
      0.30 # Spatial non-uniformity of pore distribution
      # Range: 0.00 – 1.00
      #   0.0 = uniform | 1.0 = fully clustered
